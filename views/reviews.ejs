<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–í—ñ–¥–≥—É–∫–∏</title>
  <link rel="stylesheet" href="/index.css">
  <script src="/showLog.js" defer></script> 
</head>
<style>
  

.section h2, {
    text-align: center;
    font-size: 24px;
    margin-bottom: 20px;
}

.section ul {
    list-style-type: none;
    padding: 0;
}

li {
    margin-bottom: 15px;
    padding: 15px;
    background-color: rgb(108, 231, 108);
    border: 1px solid #ddd; /* –†–∞–º–∫–∞ */
    border-radius: 8px; /* –ó–∞–∫—Ä—É–≥–ª–µ–Ω—ñ –∫—É—Ç–∏ */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3); /* –¢—ñ–Ω—å */
}

.review-item h3 {
    margin: 0 0 10px;
    font-size: 20px;
    color: #333;
}

.review-item p {
    margin: 5px 0;
    font-size: 16px;
    color: #555;
}

.review-item span {
    font-weight: bold;
    color: #007bff; /* –°–∏–Ω—ñ–π –∫–æ–ª—ñ—Ä —Ç–µ–∫—Å—Ç—É */
}
.change{
    background-color: #ff4b5c;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.2s ease;
    background-color: #3c00d3;
    padding-top: 10px;
    
  }
  button.change:hover {
    background-color: #1741ff;
    transform: scale(1.05);
  }
  .section {
    text-align: center;
}
.change {
    margin: 10px auto; /* –î–ª—è –≤—ñ–¥—Å—Ç—É–ø—ñ–≤, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ */
}

/* –ó–∞–≥–∞–ª—å–Ω–∏–π —Å—Ç–∏–ª—å –¥–ª—è –º–æ–¥–∞–ª—å–Ω–∏—Ö –≤—ñ–∫–æ–Ω */
.modal {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5); /* –ù–∞–ø—ñ–≤–ø—Ä–æ–∑–æ—Ä–∏–π —á–æ—Ä–Ω–∏–π —Ñ–æ–Ω */
  backdrop-filter: blur(5px); /* –†–æ–∑–º–∏—Ç—Ç—è —Ñ–æ–Ω—É */
  justify-content: center;
  align-items: center;
}

/* –°—Ç–∏–ª—å –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç—É –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ */
.modal-content {
  background-color: #fff;
  padding: 30px;
  border-radius: 15px;
  width: 400px;
  box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3); /* –¢—ñ–Ω—å –¥–ª—è –µ—Ñ–µ–∫—Ç—É –≥–ª–∏–±–∏–Ω–∏ */
  position: relative;
  z-index: 1001;
  text-align: center;
  background: linear-gradient(135deg, #6e89ff, #b3a8ff); /* –ì—Ä–∞–¥—ñ—î–Ω—Ç —Ñ–æ–Ω—É */
  color: #fff;
}

/* –°—Ç–∏–ª—å –¥–ª—è –∫–Ω–æ–ø–∫–∏ –∑–∞–∫—Ä–∏—Ç—Ç—è */
.close {
  color: #fff;
  float: right;
  font-size: 24px;
  font-weight: bold;
  cursor: pointer;
  transition: color 0.3s ease;
}

.close:hover,
.close:focus {
  color: #f1c40f;
}

/* –°—Ç–∏–ª—å –¥–ª—è —Ñ–æ—Ä–º */
.modal-content form {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.modal-content label {
  font-weight: bold;
  text-align: left;
  color: #f0f0f0;
}

.modal-content input {
  padding: 10px;
  border: none;
  border-radius: 8px;
  background-color: #fff;
  color: #333;
}

.modal-content input:focus {
  outline: none;
  border: 2px solid #f0f0f0;
}



.modal-content button:hover {
  background-color: #2980b9;
}

/* –°—Ç–∏–ª—å –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ */
.show {
  display: flex;
}

/* –î–æ–¥–∞—Ç–∫–æ–≤–∏–π –µ—Ñ–µ–∫—Ç –ø—Ä–∏ –∑'—è–≤–ª–µ–Ω–Ω—ñ */
@keyframes modal-appearance {
  0% {
      transform: scale(0.7);
      opacity: 0;
  }
  100% {
      transform: scale(1);
      opacity: 1;
  }
}

.modal-content {
  animation: modal-appearance 0.3s ease-out;
}
.modal-content button {
    background-color: #3498db;
    border: none;
    color: white;
    padding: 10px 20px;
    text-align: center;
    font-size: 16px;
    border-radius: 10px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  .rating {
    display: flex;
    flex-direction: row-reverse; /* –ó—ñ—Ä–æ—á–∫–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è —Å–ø—Ä–∞–≤–∞ –Ω–∞–ª—ñ–≤–æ */
    justify-content: center;
}

.rating input {
    display: none; /* –ü—Ä–∏—Ö–æ–≤—É—î–º–æ —Ä–∞–¥—ñ–æ–∫–Ω–æ–ø–∫–∏ */
}

.rating label {
    font-size: 2rem;
    color: #e7e7e7;
    cursor: pointer;
    transition: color 0.3s ease;
}

.rating input:checked ~ label {
    color: #ffc107; /* –ñ–æ–≤—Ç–∏–π –∫–æ–ª—ñ—Ä –¥–ª—è –≤–∏–±—Ä–∞–Ω–∏—Ö –∑—ñ—Ä–æ—á–æ–∫ */
}

.rating label:hover,
.rating label:hover ~ label {
    color: #ffc107; /* –ñ–æ–≤—Ç–∏–π –∫–æ–ª—ñ—Ä –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–Ω—ñ */
}

</style>
<body>
    <header>
        <img src="/logo.png" alt="Logo" id="header-logo">
        <div class="container1">
            
            <h1 id="title">–ö—É—Ä—Å –∑ –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∏</h1>
        </div>  
            <div class="menu_button" id="authBlock">
                <p class="text" id="auth"><a href="#">–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è</a></p>
                <div class="dropdown-content">
                    <button onclick="window.location.href='/auth/login.html'">–í–≤—ñ–π—Ç–∏</button>
                    <button onclick="window.location.href='/auth/register.html'">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
                </div>
            </div>
            <div class="menu_button"><a href="/" >–ì–æ–ª–æ–≤–Ω–∞</a></div>
            <div class="menu_button"><a href="/lessons" >–ö—É—Ä—Å</a></div>
            <div class="menu_button" id="profile"><a href="/profile">–ü—Ä–æ—Ñ—ñ–ª—å</a></div>
            <div class="menu_button" id="reviews"><a href="/reviews">–í—ñ–¥–≥—É–∫–∏</a></div>
    </header>

    <main>
        <div id="changeNameModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal('changeNameModal')">&times;</span>
                <h2>–û—Ü—ñ–Ω–∏—Ç–∏ –∫—É—Ä—Å</h2>
                <form id="changeNameForm" onsubmit="changeName(event)">
                    <div class="rating">
                        <input type="radio" id="star5" name="rating" value="5" required>
                        <label for="star5" title="5 stars">‚òÖ</label>
                        <input type="radio" id="star4" name="rating" value="4">
                        <label for="star4" title="4 stars">‚òÖ</label>
                        <input type="radio" id="star3" name="rating" value="3">
                        <label for="star3" title="3 stars">‚òÖ</label>
                        <input type="radio" id="star2" name="rating" value="2">
                        <label for="star2" title="2 stars">‚òÖ</label>
                        <input type="radio" id="star1" name="rating" value="1">
                        <label for="star1" title="1 star">‚òÖ</label>
                    </div>
                    <label for="description">–û–ø–∏—à—ñ—Ç—å –≤–∞—à—ñ –≤—Ä–∞–∂–µ–Ω–Ω—è –≤—ñ–¥ –∫—É—Ä—Å—É:</label>
                    <input type="text" id="description" name="description" required> 
                    <div class="anonymous">
                        <input type="checkbox" id="anonymous" name="anonymous">
                        <label for="anonymous">–•–æ—á—É –∑–∞–ª–∏—à–∏—Ç–∏ –≤—ñ–¥–≥—É–∫ –∞–Ω–æ–Ω—ñ–º–Ω–æ</label>
                    </div>
                    <button type="submit">–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –≤—ñ–¥–≥—É–∫</button>
                </form>
            </div>
        </div>
        



        <div class="container">
            <section class="section">
                <h2>–í—ñ–¥–≥—É–∫–∏</h2>
                <p>–£ –¥–∞–Ω–æ–º—É —Ä–æ–∑–¥—ñ–ª—ñ –≤–∏ –º–æ–∂–µ—Ç–µ –±–∞—á–∏—Ç–∏ –≤—ñ–¥–≥—É–∫–∏ –º–æ—ó—Ö —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–∏—Ö —É—á–Ω—ñ–≤ –∞–±–æ —Ç–∏—Ö, —è–∫—ñ –ø—Ä–∏–¥–±–∞–ª–∏ –¥–∞–Ω–∏–π –∫—É—Ä—Å. –¢–∏ —Ç–∞–∫–æ–∂ —É—á–∞—Å–Ω–∏–∫ –∫—É—Ä—Å—É? –ó–∞–ª–∏—à –≤—ñ–¥–≥—É–∫ —ñ –¥–æ–ø–æ–º–æ–∂–∏ –∑—Ä–æ–±–∏—Ç–∏ —Ü–µ–π –∫—É—Ä—Å –∫—Ä–∞—â–∏–º! üôè</p>
                <button class="change" id="changeNameButton">–î–æ–¥–∞—Ç–∏ –≤—ñ–¥–≥—É–∫</button>
            </section>
            <section class="section">
                <% if (reviews.length > 0) { %>
                    <ul>
                        <% reviews.forEach(review => { %>
                            <li>
                                <% if (!review.anonymous) { %>
                                <h3><%=  review.name %></h3>
                                <% } else { %>
                                <h3>–ê–Ω–æ–Ω—ñ–º</h3>
                                <% }  %>
                                <p><%= review.description %></p>
                                <span>–û—Ü—ñ–Ω–∫–∞: <%= review.mark %>/5</span>
                            </li>
                        <% }) %>
                    </ul>
                <% } else { %>
                    <p>–í—ñ–¥–≥—É–∫—ñ–≤ –ø–æ–∫–∏ —â–æ –Ω–µ–º–∞—î.</p>
                <% } %>
            </section>
        </div>
    </main>
<script>
    // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –ø–æ–∫–∞–∑—É –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞
function showModal(modalId) {
    document.getElementById(modalId).classList.add('show');
    document.body.classList.add('modal-open');
}

// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –∑–∞–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞
function closeModal(modalId) {
    document.getElementById(modalId).classList.remove('show');
    document.body.classList.remove('modal-open');
}

// –í—ñ–¥–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ –Ω–∞ –∫–Ω–æ–ø–∫—É
document.getElementById('changeNameButton').addEventListener('click', function() {
    showModal('changeNameModal');
});

document.getElementById('changePasswordButton').addEventListener('click', function() {
    showModal('changePasswordModal');
});
// –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è —Ñ–æ—Ä–º–∏
function changeName(event) {
    event.preventDefault();  // –∑–∞–ø–æ–±—ñ–≥–∞—î –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—é —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –ø—Ä–∏ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—ñ —Ñ–æ—Ä–º–∏
    
    // –û—Ç—Ä–∏–º—É—î–º–æ –∑–Ω–∞—á–µ–Ω–Ω—è –∑ —Ñ–æ—Ä–º–∏
    const rating = document.querySelector('input[name="rating"]:checked').value;
    const description = document.getElementById('description').value;
    const anonymous = document.getElementById('anonymous').checked;

    // –°—Ç–≤–æ—Ä—é—î–º–æ –æ–±'—î–∫—Ç –¥–∞–Ω–∏—Ö –¥–ª—è –≤—ñ–¥–ø—Ä–∞–≤–∫–∏
    const reviewData = {
        anonymous: anonymous,
        description: description,
        mark: rating
    };

    // –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–∏—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ Fetch API
    fetch('/reviews', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(reviewData)
    })
    .then(response => {
        if (!response.ok) {
            return response.json().then(data => {
                alert(data.message); // –ü–æ–∫–∞–∑—É—î–º–æ alert —ñ–∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º
                throw new Error(data.message);
            });
        }
        return response.json();
    })
    .then(data => {
        console.log('–í—ñ–¥–≥—É–∫ –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ:', data);
        // –ó–∞–∫—Ä–∏–≤–∞—î–º–æ –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ—ó –≤—ñ–¥–ø—Ä–∞–≤–∫–∏
        closeModal('changeNameModal');
    })
    .catch(error => {
        console.error('–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—ñ –≤—ñ–¥–≥—É–∫—É:', error);
    });
}

</script>
    
</body>
</html>
